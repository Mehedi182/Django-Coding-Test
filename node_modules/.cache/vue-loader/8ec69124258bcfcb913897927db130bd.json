{"remainingRequest":"/home/mehedi/Personal/examtest/Mediusware/final/Django-Coding-Test/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/mehedi/Personal/examtest/Mediusware/final/Django-Coding-Test/src/templates/assets/js/components/product/EditProduct.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/mehedi/Personal/examtest/Mediusware/final/Django-Coding-Test/src/templates/assets/js/components/product/EditProduct.vue","mtime":1687928361853},{"path":"/home/mehedi/Personal/examtest/Mediusware/final/Django-Coding-Test/node_modules/cache-loader/dist/cjs.js","mtime":1654322295579},{"path":"/home/mehedi/Personal/examtest/Mediusware/final/Django-Coding-Test/node_modules/babel-loader/lib/index.js","mtime":1687428374275},{"path":"/home/mehedi/Personal/examtest/Mediusware/final/Django-Coding-Test/node_modules/cache-loader/dist/cjs.js","mtime":1654322295579},{"path":"/home/mehedi/Personal/examtest/Mediusware/final/Django-Coding-Test/node_modules/vue-loader/lib/index.js","mtime":1687428380969}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB2dWUyRHJvcHpvbmUgZnJvbSAidnVlMi1kcm9wem9uZSI7CmltcG9ydCAidnVlMi1kcm9wem9uZS9kaXN0L3Z1ZTJEcm9wem9uZS5taW4uY3NzIjsKaW1wb3J0IElucHV0VGFnIGZyb20gInZ1ZS1pbnB1dC10YWciOwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwoKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIHZ1ZURyb3B6b25lOiB2dWUyRHJvcHpvbmUsCiAgICBJbnB1dFRhZywKICB9LAogIHByb3BzOiB7CiAgICB2YXJpYW50czogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgfSwKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBwcm9kdWN0X25hbWU6ICIiLAogICAgICBwcm9kdWN0X3NrdTogIiIsCiAgICAgIGRlc2NyaXB0aW9uOiAiIiwKICAgICAgaW1hZ2VzOiBbXSwKICAgICAgcHJvZHVjdF92YXJpYW50OiBbCiAgICAgICAgewogICAgICAgICAgb3B0aW9uOiB0aGlzLnZhcmlhbnRzWzBdLmlkLAogICAgICAgICAgdGFnczogW10sCiAgICAgICAgfSwKICAgICAgXSwKICAgICAgcHJvZHVjdF92YXJpYW50X3ByaWNlczogW10sCiAgICAgIGRyb3B6b25lT3B0aW9uczogewogICAgICAgIHVybDogImh0dHBzOi8vaHR0cGJpbi5vcmcvcG9zdCIsCiAgICAgICAgdGh1bWJuYWlsV2lkdGg6IDE1MCwKICAgICAgICBtYXhGaWxlc2l6ZTogMC41LAogICAgICAgIGhlYWRlcnM6IHsgIk15LUF3ZXNvbWUtSGVhZGVyIjogImhlYWRlciB2YWx1ZSIgfSwKICAgICAgfSwKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICB1cGRhdGVQcm9kdWN0KCkgewogICAgICAvLyBTZW5kIGFuIEFQSSByZXF1ZXN0IHRvIHVwZGF0ZSB0aGUgcHJvZHVjdAogICAgICAvLyBZb3UgY2FuIHVzZSBsaWJyYXJpZXMgbGlrZSBBeGlvcyB0byBtYWtlIHRoZSByZXF1ZXN0CgogICAgICAvLyBFeGFtcGxlIHVzaW5nIEF4aW9zOgogICAgICBheGlvcwogICAgICAgICAgLnB1dChgL3Byb2R1Y3QvJHt0aGlzLiRyb3V0ZS5wYXJhbXMuaWR9L2VkaXQvYCwgdGhpcy5wcm9kdWN0KQogICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICAvLyBIYW5kbGUgdGhlIHN1Y2Nlc3NmdWwgcmVzcG9uc2UKICAgICAgICAgICAgY29uc29sZS5sb2coJ1Byb2R1Y3QgdXBkYXRlZDonLCByZXNwb25zZS5kYXRhKTsKICAgICAgICAgICAgLy8gUmVkaXJlY3QgdG8gdGhlIHByb2R1Y3QgbGlzdCBwYWdlCiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvcHJvZHVjdCcpOwogICAgICAgICAgfSkKICAgICAgICAgIC5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgICAgIC8vIEhhbmRsZSB0aGUgZXJyb3IKICAgICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIHVwZGF0ZSBwcm9kdWN0OicsIGVycm9yKTsKICAgICAgICAgIH0pOwogICAgfSwKICAgIG5ld1ZhcmlhbnQoKSB7CiAgICAgIGxldCBhbGxfdmFyaWFudHMgPSB0aGlzLnZhcmlhbnRzLm1hcCgoZWwpID0+IGVsLmlkKTsKICAgICAgbGV0IHNlbGVjdGVkX3ZhcmlhbnRzID0gdGhpcy5wcm9kdWN0X3ZhcmlhbnQubWFwKChlbCkgPT4gZWwub3B0aW9uKTsKICAgICAgbGV0IGF2YWlsYWJsZV92YXJpYW50cyA9IGFsbF92YXJpYW50cy5maWx0ZXIoCiAgICAgICAgKGVudHJ5MSkgPT4gIXNlbGVjdGVkX3ZhcmlhbnRzLnNvbWUoKGVudHJ5MikgPT4gZW50cnkxID09IGVudHJ5MikKICAgICAgKTsKICAgICAgLy8gY29uc29sZS5sb2coYXZhaWxhYmxlX3ZhcmlhbnRzKQoKICAgICAgdGhpcy5wcm9kdWN0X3ZhcmlhbnQucHVzaCh7CiAgICAgICAgb3B0aW9uOiBhdmFpbGFibGVfdmFyaWFudHNbMF0sCiAgICAgICAgdGFnczogW10sCiAgICAgIH0pOwogICAgfSwKCiAgICAvLyBjaGVjayB0aGUgdmFyaWFudCBhbmQgcmVuZGVyIGFsbCB0aGUgY29tYmluYXRpb24KICAgIGNoZWNrVmFyaWFudCgpIHsKICAgICAgbGV0IHRhZ3MgPSBbXTsKICAgICAgdGhpcy5wcm9kdWN0X3ZhcmlhbnRfcHJpY2VzID0gW107CiAgICAgIHRoaXMucHJvZHVjdF92YXJpYW50LmZpbHRlcigoaXRlbSkgPT4gewogICAgICAgIHRhZ3MucHVzaChpdGVtLnRhZ3MpOwogICAgICB9KTsKCiAgICAgIHRoaXMuZ2V0Q29tYm4odGFncykuZm9yRWFjaCgoaXRlbSkgPT4gewogICAgICAgIHRoaXMucHJvZHVjdF92YXJpYW50X3ByaWNlcy5wdXNoKHsKICAgICAgICAgIHRpdGxlOiBpdGVtLAogICAgICAgICAgcHJpY2U6IDAsCiAgICAgICAgICBzdG9jazogMCwKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAoKICAgIC8vIGNvbWJpbmF0aW9uIGFsZ29yaXRobQogICAgZ2V0Q29tYm4oYXJyLCBwcmUpIHsKICAgICAgcHJlID0gcHJlIHx8ICIiOwogICAgICBpZiAoIWFyci5sZW5ndGgpIHsKICAgICAgICByZXR1cm4gcHJlOwogICAgICB9CiAgICAgIGxldCBzZWxmID0gdGhpczsKICAgICAgbGV0IGFucyA9IGFyclswXS5yZWR1Y2UoZnVuY3Rpb24gKGFucywgdmFsdWUpIHsKICAgICAgICByZXR1cm4gYW5zLmNvbmNhdChzZWxmLmdldENvbWJuKGFyci5zbGljZSgxKSwgcHJlICsgdmFsdWUgKyAiLyIpKTsKICAgICAgfSwgW10pOwogICAgICByZXR1cm4gYW5zOwogICAgfSwKICB9LAogIGNyZWF0ZWQoKSB7CiAgICAvLyBGZXRjaCB0aGUgcHJvZHVjdCBkYXRhIGZyb20gdGhlIEFQSQogICAgLy8gWW91IGNhbiB1c2UgbGlicmFyaWVzIGxpa2UgQXhpb3MgdG8gbWFrZSB0aGUgcmVxdWVzdAoKICAgIC8vIEV4YW1wbGUgdXNpbmcgQXhpb3M6CiAgICB2YXIgY3VycmVudFBhdGggPSB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWU7CiAgICB2YXIgcGF0aFNlZ21lbnRzID0gY3VycmVudFBhdGguc3BsaXQoJy8nKTsKCiAgICB2YXIgcHJvZHVjdElkID0gcGF0aFNlZ21lbnRzWzJdCiAgICAvLyBkZWJ1Z2dlcjsKICAgIGF4aW9zCiAgICAgICAgLmdldChgL3Byb2R1Y3QvJHtwcm9kdWN0SWR9L2ApCiAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgLy8gU2V0IHRoZSBmZXRjaGVkIHByb2R1Y3QgZGF0YSB0byB0aGUgY29tcG9uZW50J3MgZGF0YQogICAgICAgICAgLy8gdGhpcy5wcm9kdWN0ID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEpCiAgICAgICAgICB0aGlzLnByb2R1Y3RfbmFtZSA9IHJlc3BvbnNlLmRhdGEucHJvZHVjdFswXS50aXRsZQogICAgICAgICAgdGhpcy5wcm9kdWN0X3NrdSA9IHJlc3BvbnNlLmRhdGEucHJvZHVjdFswXS5za3UKICAgICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSByZXNwb25zZS5kYXRhLnByb2R1Y3RbMF0uZGVzY3JpcHRpb24KICAgICAgICAgIHRoaXMucHJvZHVjdF92YXJpYW50ID0gcmVzcG9uc2UuZGF0YS5wcm9kdWN0X3ZhcmlhbnQKCiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goZXJyb3IgPT4gewogICAgICAgICAgLy8gSGFuZGxlIHRoZSBlcnJvcgogICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGZldGNoIHByb2R1Y3Q6JywgZXJyb3IpOwogICAgICAgIH0pOwogIH0sCiAgCn07Cg=="},{"version":3,"sources":["EditProduct.vue"],"names":[],"mappings":";AAsJA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"EditProduct.vue","sourceRoot":"src/templates/assets/js/components/product","sourcesContent":["<template>\n  <section>\n    <div class=\"row\">\n      <div class=\"col-md-6\">\n        <div class=\"card shadow mb-4\">\n          <div class=\"card-body\">\n            <div class=\"form-group\">\n              <label for=\"\">Product Name</label>\n              <input\n                  type=\"text\"\n                  v-model=\"product_name\"\n                  placeholder=\"Product Name\"\n                  class=\"form-control\"\n              />\n            </div>\n            <div class=\"form-group\">\n              <label for=\"\">Product SKU</label>\n              <input\n                  type=\"text\"\n                  v-model=\"product_sku\"\n                  placeholder=\"Product Name\"\n                  class=\"form-control\"\n              />\n            </div>\n            <div class=\"form-group\">\n              <label for=\"\">Description</label>\n              <textarea\n                  v-model=\"description\"\n                  id=\"\"\n                  cols=\"30\"\n                  rows=\"4\"\n                  class=\"form-control\"\n              ></textarea>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"card shadow mb-4\">\n          <div\n              class=\"card-header py-3 d-flex flex-row align-items-center justify-content-between\"\n          >\n            <h6 class=\"m-0 font-weight-bold text-primary\">Media</h6>\n          </div>\n          <div class=\"card-body border\">\n            <vue-dropzone\n                ref=\"myVueDropzone\"\n                id=\"dropzone\"\n                :options=\"dropzoneOptions\"\n            ></vue-dropzone>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"col-md-6\">\n        <div class=\"card shadow mb-4\">\n          <div\n              class=\"card-header py-3 d-flex flex-row align-items-center justify-content-between\"\n          >\n            <h6 class=\"m-0 font-weight-bold text-primary\">Variants</h6>\n          </div>\n          <div class=\"card-body\">\n            <div class=\"row\" v-for=\"(item, index) in product_variant\">\n              <div class=\"col-md-4\">\n                <div class=\"form-group\">\n                  <label for=\"\">Option</label>\n                  <select v-model=\"item.option\" class=\"form-control\">\n                    <option v-for=\"variant in variants\" :value=\"variant.id\">\n                      {{ variant.variant_title }}\n                    </option>\n                  </select>\n                </div>\n              </div>\n              <div class=\"col-md-8\">\n                <div class=\"form-group\">\n                  <label\n                      v-if=\"product_variant.length != 1\"\n                      @click=\"\n                      product_variant.splice(index, 1);\n                      checkVariant;\n                    \"\n                      class=\"float-right text-primary\"\n                      style=\"cursor: pointer\"\n                  >Remove</label\n                  >\n                  <label v-else for=\"\">.</label>\n                  <input-tag\n                      v-model=\"item.tags\"\n                      @input=\"checkVariant\"\n                      class=\"form-control\"\n                  ></input-tag>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div\n              class=\"card-footer\"\n              v-if=\"\n              product_variant.length < variants.length &&\n              product_variant.length < 3\n            \"\n          >\n            <button @click=\"newVariant\" class=\"btn btn-primary\">\n              Add another option\n            </button>\n          </div>\n\n          <div class=\"card-header text-uppercase\">Preview</div>\n          <div class=\"card-body\">\n            <div class=\"table-responsive\">\n              <table class=\"table\">\n                <thead>\n                <tr>\n                  <td>Variant</td>\n                  <td>Price</td>\n                  <td>Stock</td>\n                </tr>\n                </thead>\n                <tbody>\n                <tr v-for=\"variant_price in product_variant_prices\">\n                  <td>{{ variant_price.title }}</td>\n                  <td>\n                    <input\n                        type=\"text\"\n                        class=\"form-control\"\n                        v-model=\"variant_price.price\"\n                    />\n                  </td>\n                  <td>\n                    <input\n                        type=\"text\"\n                        class=\"form-control\"\n                        v-model=\"variant_price.stock\"\n                    />\n                  </td>\n                </tr>\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <button @click=\"updateProduct\" type=\"submit\" class=\"btn btn-lg btn-primary\">\n      Save\n    </button>\n    <button type=\"button\" class=\"btn btn-secondary btn-lg\">Cancel</button>\n  </section>\n</template>\n<script>\nimport vue2Dropzone from \"vue2-dropzone\";\nimport \"vue2-dropzone/dist/vue2Dropzone.min.css\";\nimport InputTag from \"vue-input-tag\";\nimport axios from \"axios\";\n\nexport default {\n  components: {\n    vueDropzone: vue2Dropzone,\n    InputTag,\n  },\n  props: {\n    variants: {\n      type: Array,\n      required: false,\n    },\n  },\n  data() {\n    return {\n      product_name: \"\",\n      product_sku: \"\",\n      description: \"\",\n      images: [],\n      product_variant: [\n        {\n          option: this.variants[0].id,\n          tags: [],\n        },\n      ],\n      product_variant_prices: [],\n      dropzoneOptions: {\n        url: \"https://httpbin.org/post\",\n        thumbnailWidth: 150,\n        maxFilesize: 0.5,\n        headers: { \"My-Awesome-Header\": \"header value\" },\n      },\n    };\n  },\n  methods: {\n    updateProduct() {\n      // Send an API request to update the product\n      // You can use libraries like Axios to make the request\n\n      // Example using Axios:\n      axios\n          .put(`/product/${this.$route.params.id}/edit/`, this.product)\n          .then(response => {\n            // Handle the successful response\n            console.log('Product updated:', response.data);\n            // Redirect to the product list page\n            this.$router.push('/product');\n          })\n          .catch(error => {\n            // Handle the error\n            console.error('Failed to update product:', error);\n          });\n    },\n    newVariant() {\n      let all_variants = this.variants.map((el) => el.id);\n      let selected_variants = this.product_variant.map((el) => el.option);\n      let available_variants = all_variants.filter(\n        (entry1) => !selected_variants.some((entry2) => entry1 == entry2)\n      );\n      // console.log(available_variants)\n\n      this.product_variant.push({\n        option: available_variants[0],\n        tags: [],\n      });\n    },\n\n    // check the variant and render all the combination\n    checkVariant() {\n      let tags = [];\n      this.product_variant_prices = [];\n      this.product_variant.filter((item) => {\n        tags.push(item.tags);\n      });\n\n      this.getCombn(tags).forEach((item) => {\n        this.product_variant_prices.push({\n          title: item,\n          price: 0,\n          stock: 0,\n        });\n      });\n    },\n\n    // combination algorithm\n    getCombn(arr, pre) {\n      pre = pre || \"\";\n      if (!arr.length) {\n        return pre;\n      }\n      let self = this;\n      let ans = arr[0].reduce(function (ans, value) {\n        return ans.concat(self.getCombn(arr.slice(1), pre + value + \"/\"));\n      }, []);\n      return ans;\n    },\n  },\n  created() {\n    // Fetch the product data from the API\n    // You can use libraries like Axios to make the request\n\n    // Example using Axios:\n    var currentPath = window.location.pathname;\n    var pathSegments = currentPath.split('/');\n\n    var productId = pathSegments[2]\n    // debugger;\n    axios\n        .get(`/product/${productId}/`)\n        .then(response => {\n          // Set the fetched product data to the component's data\n          // this.product = response.data;\n          console.log(response.data)\n          this.product_name = response.data.product[0].title\n          this.product_sku = response.data.product[0].sku\n          this.description = response.data.product[0].description\n          this.product_variant = response.data.product_variant\n\n        })\n        .catch(error => {\n          // Handle the error\n          console.error('Failed to fetch product:', error);\n        });\n  },\n  \n};\n</script>\n"]}]}